<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Maze Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="volume-widget">
  <button id="volume-icon" class="volume-icon">ðŸ”Š</button>
  <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.6">
</div>
<audio id="bg-music" loop style="display:none">
  <source src="bg-music.mp3" type="audio/mp3">
  Your browser does not support the audio element.
</audio>

  <!-- Background video -->
  <video id="bg-video" autoplay loop muted playsinline>
    <source src="trial.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>
  <!-- Background image for homepage -->
  <div class="homepage-bg"></div>
  <main class="home-container">
    <h1>Impossible Maze!</h1>
    <p class="desc">
      Guide Your Mouse Through The Unsolvable MAZE! This Is A GAME BY AROMAL M
    </p>
    <div class="maze-preview">
      <img src="maze-pre.png" alt="Maze Preview" />
    </div>

    <!-- Sensitivity control -->
    <div class="sensitivity-control">
      <label for="sensitivity-slider">Mouse Sensitivity:</label>
      <input type="range" min="0.1" max="10" step="0.01" value="1.00" id="sensitivity-slider">
      <span id="sensitivity-value">1.00</span>
    </div>

    <button id="start-btn">Start Game</button>
  </main>
<script>
const startBtn = document.getElementById('start-btn');
const bgMusic = document.getElementById('bg-music');
const volumeSlider = document.getElementById('volume-slider');
const volumeIcon = document.getElementById('volume-icon');
const slider = document.getElementById('sensitivity-slider');
const valueLabel = document.getElementById('sensitivity-value');

//  Sensitivity slider setup
slider.addEventListener('input', function () {
  valueLabel.textContent = parseFloat(slider.value).toFixed(2);
  localStorage.setItem('mazeSensitivity', slider.value);
});

//  Load saved sensitivity and volume
window.addEventListener('DOMContentLoaded', () => {
  const savedSens = localStorage.getItem('mazeSensitivity');
  if (savedSens !== null) {
    slider.value = savedSens;
    valueLabel.textContent = parseFloat(savedSens).toFixed(2);
  }

  const savedVolume = localStorage.getItem('mazeVolume');
  const volume = savedVolume !== null ? parseFloat(savedVolume) : 0.6;
  bgMusic.volume = volume;
  volumeSlider.value = volume;
  updateVolumeIcon(volume);
});

// Play music on first interaction
document.body.addEventListener('click', () => {
  bgMusic.play().catch(() => {});
}, { once: true });

// Volume slider interaction
volumeSlider.addEventListener('input', () => {
  const newVolume = parseFloat(volumeSlider.value);
  bgMusic.volume = newVolume;
  localStorage.setItem('mazeVolume', newVolume);
  updateVolumeIcon(newVolume);
});

// Volume icon auto-updates
function updateVolumeIcon(volume) {
  if (volume == 0) {
    volumeIcon.textContent = 'ðŸ”‡';
  } else if (volume <= 0.5) {
    volumeIcon.textContent = 'ðŸ”‰';
  } else {
    volumeIcon.textContent = 'ðŸ”Š';
  }
}

//  Start button: stop music + go to game
startBtn.addEventListener('click', () => {
  bgMusic.pause();
  bgMusic.currentTime = 0;
  window.location.href = "game.html";
});
</script>

</body>
</html>